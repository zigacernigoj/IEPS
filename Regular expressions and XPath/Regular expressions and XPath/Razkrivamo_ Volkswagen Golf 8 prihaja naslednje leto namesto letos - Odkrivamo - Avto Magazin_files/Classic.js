(function(){function t(a){var c="";d.common(a)&&(c=d.common(a));b.issetKey(a,"format_id")&&1==a.format_id||(c+="ad.format_id;");b.issetKey(a,"ad_settings.width","int")||(c+="ad.ad_settings.width;");b.issetKey(a,"ad_settings.height","int")||(c+="ad.ad_settings.height;");b.issetKey(a,"ad_settings.target_frame","string")&&d.targetFrame(a.ad_settings.target_frame)||(c+="ad_settings.target_frame;");b.issetKey(a,"ad_settings.creative.type","string")&&d.creativeType(a.ad_settings.creative.type)||(c+="ad_settings.creative.type -> value not a string or not correct value;");if(!b.issetKey(a,"ad_settings.creative.width","int")||!d.integerPositiveValue(a.ad_settings.creative.width)&&"archive"!=a.ad_settings.creative.type&&"html"!=a.ad_settings.creative.type)c+="ad_settings.creative.width -> value not an integer or not positive value;";if(!b.issetKey(a,"ad_settings.creative.height","int")||!d.integerPositiveValue(a.ad_settings.creative.height)&&"archive"!=a.ad_settings.creative.type&&"html"!=a.ad_settings.creative.type)c+="ad_settings.creative.height -> value not an integer or not positive value;";b.issetKey(a,"ad_settings.creative.src","string")||(c+="ad_settings.creative.src;");b.issetKey(a,"ad_settings.creative.layer","int")&&d.isZeroOrOne(a.ad_settings.creative.layer)||(c+="ad_settings.creative.layer;");b.issetKey(a,"ad_settings.ad_choices")||(c+="ad_settings.ad_choices;");return""!=c?c:!1}var b=ipromNS.Utils,d=new b.ValidateAd;window.ipromNS.version.format[1]=1.019;var h=Object.assign({},{mode:"default"},b.issetKey(window,"ipromNS.formatSettings.1")?window.ipromNS.formatSettings[1]:{});window.ipromNS.adFormats[1]=function(a){function c(){for(var b=a.zoneHolder,c=b.offsetWidth,u=0;0==b.offsetWidth&&10>u++;)b=b.parentNode,c=b.offsetWidth;b=Math.min(50<c?c:a.ad_settings.width,50<a.zoneHolder.offsetWidth?a.zoneHolder.offsetWidth:a.ad_settings.width,a.ad_settings.width);"fit"==h.mode&&a.zoneHolder.offsetHeight&&a.ad_settings.height/a.ad_settings.width*b>a.zoneHolder.offsetHeight&&(b=a.ad_settings.width/a.ad_settings.height*a.zoneHolder.offsetHeight);"stretch"==h.mode&&(b=a.ad_settings.width);return{width:b,height:a.ad_settings.height/a.ad_settings.width*b}}function d(a){/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&f.element.querySelector("iframe")&&b.setStyle(f.element.querySelector("iframe"),{width:a.width,height:a.height})}function n(){var b=c();f.setStyle({width:b.width,height:b.height,marginTop:(a.zoneHolder.offsetHeight-b.height)/2});d(b)}function v(){var e=c();f=new b.Layer;f.addClass("iprom-classic-creative");f.setStyle({width:e.width,height:e.height,position:"absolute",cursor:"pointer"});a.ad_settings.creative.salt=p;f.addCreative(a.ad_settings.creative,{trackingLinks:a.tracking_links,trackingExternal:b.issetKey(a,"tracking_external")?a.tracking_external:null,targetFrame:"undefined"!=typeof a.ad_settings.target_frame?a.ad_settings.target_frame:null,target:a.target_arr[0],old:"undefined"!=typeof a.old?a.old:null,windowSource:k,windowTarget:g});q.push(f.element);r=b.createAd(q,{holder:a.zoneHolder,width:e.width,margin:"0 auto",height:e.height});d(e);e="block";b.issetKey(l,"zoneSettings")&&"undefined"!=typeof l.zoneSettings[a.zone_id]&&"undefined"!=typeof l.zoneSettings[a.zone_id].display&&(e=l.zoneSettings[a.zone_id].display);a.zoneHolder.style.display=e+" !important";a.zoneHolder.style.setProperty("display",e,"important");b.bindEvents(g,{resize:n});w(r);window.addEventListener("message",function(a){var c=a.data;b.issetKey(c,"salt")&&c.salt==p&&b.issetKey(c,"status")&&"geom-update"==a.data.status&&(a={},b.issetKey(c,"dimensions.width")&&(a.width=c.dimensions.width),b.issetKey(c,"dimensions.height")&&(a.height=c.dimensions.height),b.issetKey(c,"position.top")&&(a.marginTop=c.position.top),b.issetKey(c,"position.left")&&(a.marginLeft=c.position.left),b.issetKey(c,"zIndex")&&(a.zIndex=c.zIndex),f.setStyle(a))});a.zoneHolder.querySelector(".iprom-classic-creative iframe")&&b.Shake&&((new b.Shake(g,g.document)).start(),g.addEventListener("shake",function(){a.zoneHolder.querySelector(".iprom-classic-creative iframe").contentWindow.postMessage({initiator:"iprom",event:"shake"},"*")},!1))}function w(c){"undefined"!=typeof k.adTagParams&&k.adTagParams.trackingExternal&&(this.ad.tracking_external=k.adTagParams.trackingExternal);b.appendExternal(a);b.logImpression(a.tracking_links.i);b.issetKey(a,"tracking_external.i")&&b.logImpression(a.tracking_external.i,k);a.tracking_links.ai&&!a.tracking_links.ai.match(/asci\_impression/)&&b.sendHTTP(a.tracking_links.ai);b.logView(c,a.tracking_links.v,.5,1,g);b.issetKey(a,"tracking_external.v")&&b.logView(c,a.tracking_external.v,.5,1,g,k);new b.TimeOnSite(a.tracking_links.e,30);new b.TimeInView(a.tracking_links.e,c,g)}var g=a.window||window,k=a.window||window,x=top,l=ipromNS,p=b.randomString(20),q=[],f=null,r=null,m="No error";if(m=t(a))return console.log("[AD ERRORS: "+a.ad_id+"]"+m),b.logCustomEvent(a.tracking_links.e,{error:m}),m;b.escapeIframe(g,x,l,a.zoneHolder);b.checkNested(a.zoneHolder,/iprom-classic-creative/);a.zoneHolder.querySelector(".iprom-classic-creative")?console.log(a.ad_id,"ad started twice"):(a.resizeAdHolder=n,b.issetKey(h,"beforeRender")&&h.beforeRender.call(this,a),v(),b.issetKey(h,"afterRender")&&h.afterRender.call(this,a))};window.ipromNS.loadFormat(1)})();